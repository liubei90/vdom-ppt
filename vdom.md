# dom是什么

# vdom是什么

# vdom的实现原理

# vdom实现的细节

## dom元素的property和attribute

### attribute
在dom上有个attributes对象


## 要监听哪些dom属性
属性修改后，会影响元素的展示，就需要监听

## 使用了vdom的框架

## html规范对vdom的支持

## vue中keep-alive的原理

## vdom之后的发展



# 前端应用状态的思考

- 一个排序功能，当用户点击排序，首先修改排序字段，排序规则，对数据排序，之后通过操作DOM更新新的列表，排序图标也要跟着修改
- 随着应用越来越复杂，js里要维护的状态越来越多，需要监听的事件和DOM操作也越来越多
- mvc试图通过代码组织的方式降低难度，但是没有减少状态，也没有减少DOM的操作
- mvc将视图层和状态层的同步逻辑散布在控制层的各个部分，开发人员需要自己维护控制层
- mvvm中的vm层用来替代控制层的功能，在框架层面，自动同步视图层和状态层
- mvvm的核心 1. 状态层的监控 2. 视图层的监控


## 状态层的监控

angular使用脏值检测
vue2使用数据劫持， vue3使用数据代理

## 视图层的监控

更新视图方面
angular将状态的变化传递给每个指令，指令修改组件属性和更新视图
vue将状态变化传递给watcher，watcher执行render函数生成新的vdom树，然后diff新旧vdom树，更新视图

### 更新视图的策略

- 最简单的策略，状态发生改变，重新生成视图元素（性能差）
- 对比前后状态，判断出哪些视图元素需要更新（定位要更新点困难）
- 使用虚拟dom（依赖diff算法的效率）

### 使用虚拟dom的原因

- 抽象化渲染过程，提升组件抽象能力，使得组件可以渲染到DOM以外的平台（weex）
- 可以实现ssr
  + https://www.php.cn/js-tutorial-411822.html
- aot模板编译，压缩vue运行时体积，提升运行效率
- 最小化DOM操作
